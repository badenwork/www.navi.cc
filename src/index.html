<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en" ng-app="app"> <!--<![endif]-->
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>Персональная система мониторинга транспорта</title>
    <meta name="author" content="BaDen"/>
    <!--meta name="viewport" content="width=device-width" initial-scale="1.0"/-->
    <meta name='HandheldFriendly' content='True' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />
    <meta name="viewport" content="target-densitydpi=device-dpi, initial-scale=1.0, user-scalable=no" />

    <link rel='stylesheet' href='css/jquery-ui-1.10.1.min.css' />
    <link rel='stylesheet' href='css/bootstrap-2.3.1.min.css' />
    <link rel='stylesheet' href='css/bootstrap-responsive-2.3.1.min.css' />
    <!--link rel='stylesheet' href='css/datepicker.min.css' /-->
    <link rel='stylesheet' href='css/font-awesome-3.0.2.min.css' />

    <!--[if lte IE 8]>
        <link rel='stylesheet' href='css/font-awesome-ie7-3.0.2.min.css' />
    <![endif]-->

    <!--meta name="viewport" content="width=device-width" /-->
    <link rel='stylesheet' media='screen and (min-width: 0px) and (max-width: 990px)' href='css/compact.css' />
    <link rel="stylesheet" type="text/css" href="css/<%= grunt.config.get('pkg.name') %>.css"/>

</head>

<body ng-controller="AppCtrl">
    <!--[if lt IE 7]>
        <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
    <![endif]-->

    <!--[if lte IE 8]>
        <script>
        // The ieshiv takes care of our ui.directives, bootstrap module directives and
        // AngularJS's ng-view, ng-include, ng-pluralize and ng-switch directives.
        // However, IF you have custom directives (yours or someone else's) then
        // enumerate the list of tags in window.myCustomTags

        window.myCustomTags = [ 'yourDirective', 'somebodyElsesDirective' ]; // optional
        </script>
        <script src="build/angular-ui-ieshiv.js"></script>
    <![endif]-->

    <!--[if lt IE 9]>
        <script src="scripts/vendor/es5-shim.min.js"></script>
        <script src="scripts/vendor/json3.min.js"></script>
    <![endif]-->

    <div ng-include="'templates/header.tpl.html'" style="z-index: 1001; position: absolute;top:0px;right:0px;left:0px;"></div>

    <div ng-view class="content" ng-class="{contentfixed: location.path().match('^/map')}"></div>
    <div ng-include="'templates/notifications.tpl.html'" class="container-fluid notification" ng-show="notifications.getCurrent().length"></div>

    <div id="loader">
        <i class="icon-refresh icon-4x icon-spin"></i>
    </div>

    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.10.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-2.3.1.min.js"></script>
    <script type="text/javascript" src="js/bootstrap-datepicker.js"></script>
    <script type="text/javascript" src="js/locales/bootstrap-datepicker.ru.js"></script>
    <script type="text/javascript" src="js/angular-1.1.3.min.js"></script>
    <script type="text/javascript" src="js/angular-resource-1.1.3.min.js"></script>
    <script type="text/javascript" src="js/angular-ui-0.4.0.min.js"></script>

    <!--[if lte IE 8]>
        <script>
            window.myCustomTags = [ 'yourCustomDirective', 'somebodyElsesDirective' ]; // optional
        </script>
        <script src="js/angular-ui-ieshiv-0.4.0.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="js/sockjs-0.3.min.js"></script>
    <script type="text/javascript" src="js/moment-2.0.0.min.js"></script>
    <script type="text/javascript" src="js/moment-ru.js"></script>
    <script type="text/javascript" src="js/i18n.js"></script>
    <script type="text/javascript" src="js/<%= grunt.config.get('pkg.name') %>.js"></script>
    <script type="text/javascript">
        locale = localStorage.getItem('language');
        if(!locale) {
            locale = 'en';
        }
        console.log('locale=', locale);
        document.write('<script type="text/javascript" src="js/templates-'+locale+'.js"><\/script>');
    </script>

    <!--script type="text/javascript" src="js/templates-en.js" id="templates"></script-->

    <script type="text/javascript">
        /*window.document.onselectstart = function(ev) {
          return false;
        };*/

        window.document.onselectstart = function(ev){
            if((ev.target.getAttribute && ev.target.getAttribute('contenteditable')) || (ev.target.parentNode && ev.target.parentNode.getAttribute('contenteditable')!=null)) {
                return true;
            }
            return false;
        }   // Запретим выделение (внимание решение может быть не кроссбраузерно)

        $("[rel=tooltip]").tooltip();
        //angular.bootstrap(document, ['app']);
        var loader = document.querySelector("#loader");
        //loader.
        loader.parentNode.removeChild(loader);
    </script>
</body>
</html>

